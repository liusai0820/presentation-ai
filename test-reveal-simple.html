<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reveal.js 简单测试</title>
  
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@5.0.4/dist/reveal.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@5.0.4/dist/theme/white.css">
  
  <style>
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    
    .reveal {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <div class="reveal">
    <div class="slides">
      <section>
        <h1>海南自贸港</h1>
        <h2>核心战略与发展机遇</h2>
        <p>Reveal.js 演示文稿测试</p>
      </section>

      <section>
        <h2>发展蓝图：分阶段迈向高水平开放形态</h2>
        <p>海南自贸港的建设遵循清晰的三个阶段，分阶段的宏伟蓝图，旨在逐步实现最终目标。</p>
        <ul>
          <li><strong>2025年：初步建立</strong> - 初步建立以贸易投资自由化便利化为重点的自由贸易港政策制度体系</li>
          <li><strong>2035年：成熟运作</strong> - 自由贸易港制度体系和运作模式更加成熟</li>
          <li><strong>本世纪中叶：全面建成</strong> - 全面建成具有较强国际影响力的高水平自由贸易港</li>
        </ul>
      </section>

      <section>
        <h2>第三页测试</h2>
        <p>这是第三页内容</p>
        <table>
          <tr>
            <th>项目</th>
            <th>数值</th>
          </tr>
          <tr>
            <td>A</td>
            <td>100</td>
          </tr>
          <tr>
            <td>B</td>
            <td>200</td>
          </tr>
        </table>
      </section>

      <section>
        <h2>谢谢观看</h2>
        <p>测试完成</p>
      </section>
    </div>
  </div>

  <script src="https://unpkg.com/reveal.js@5.0.4/dist/reveal.js"></script>
  
  <script>
    const isInIframe = window.self !== window.top;
    console.log('运行环境:', isInIframe ? 'iframe内嵌' : '独立窗口');
    
    Reveal.initialize({
      width: 960,
      height: 700,
      margin: 0.04,
      minScale: 0.2,
      maxScale: 2.0,
      
      center: true,
      embedded: false,
      disableLayout: false,
      
      hash: false,
      transition: 'slide',
      controls: true,
      progress: true,
      slideNumber: true,
      keyboard: true,
      touch: true,
    }).then(() => {
      console.log('Reveal.js 初始化成功');
      console.log('幻灯片数量:', Reveal.getTotalSlides());
      
      function handleFullscreenChange() {
        const isFullscreen = !!(document.fullscreenElement || 
                               document.webkitFullscreenElement || 
                               document.mozFullScreenElement);
        
        console.log('全屏状态变化:', isFullscreen ? '进入全屏' : '退出全屏');
        
        setTimeout(() => {
          Reveal.layout();
          console.log('第一次布局刷新');
        }, 100);
        
        setTimeout(() => {
          Reveal.layout();
          console.log('第二次布局刷新');
        }, 300);
      }
      
      document.addEventListener('fullscreenchange', handleFullscreenChange);
      document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
      document.addEventListener('mozfullscreenchange', handleFullscreenChange);
      
      let resizeTimer;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => {
          Reveal.layout();
          console.log('窗口大小改变，重新布局');
        }, 200);
      });
      
      if (isInIframe) {
        console.log('检测到 iframe 环境');
        setTimeout(() => {
          Reveal.layout();
          console.log('iframe 初始布局刷新');
        }, 500);
      }
    });
  </script>
</body>
</html>
